---
title: "Packages in a nutshell"
subtitle: "A Forwards Package Development module"
author: "<br>Emma Rand"
date: "<br>ðŸ”— [link to slides](https://forwards.github.io/)"
output:
  xaringan::moon_reader:
    css: ["style-xaringanthemer.css", "style-custom.css"]
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightLines: true
      highlightStyle: github
      countIncrementalSlides: false
---

```{r define-style, include = FALSE}
# xaringanthemer ---------------------------------------------------------------
library(xaringanthemer)
style_duo_accent(
  primary_color = "#AD4475", # soft pink
  secondary_color = "#8D377C", # purple
  link_color = "#4485ad", # blue
  code_highlight_color = "#F9E5AF", # light-yellow
  code_inline_color = "#A7A7A7", # gray
  base_font_size = "35px",
  header_h1_font_size = "2.5rem",
  header_h2_font_size = "2rem",
  header_h3_font_size = "1.75rem",
  text_font_google = google_font("Source Sans Pro"),
  text_font_family = xaringanthemer_font_default("text_font_family"),
  text_font_weight = xaringanthemer_font_default("text_font_weight"),
  text_font_url = xaringanthemer_font_default("text_font_url"),
  text_font_family_fallback = xaringanthemer_font_default("text_font_family_fallback"),
  text_font_base = "sans-serif",
  code_font_google = google_font("Source Sans Code"),
  code_font_family = xaringanthemer_font_default("code_font_family"),
  code_font_size = "25px",
  code_font_url = xaringanthemer_font_default("code_font_url"),
  code_font_family_fallback = xaringanthemer_font_default("code_font_family_fallback"),
  outfile = "style-xaringanthemer.css"
)

# R options --------------------------------------------------------------------
options(
  htmltools.dir.version = FALSE,
  dplyr.print_min = 6,
  dplyr.print_max = 6,
  tibble.width = 65,
  width = 65
)

# figure height, width, dpi ----------------------------------------------------

knitr::opts_chunk$set(
  echo = TRUE,
  fig.width = 8,
  fig.asp = 0.618,
  out.width = "60%",
  fig.align = "center",
  dpi = 300,
  message = FALSE
)

# ggplot2 ----------------------------------------------------------------------
ggplot2::theme_set(ggplot2::theme_minimal(base_size = 18))

# countdown --------------------------------------------------------------------
library(countdown)

# xaringanExtra ----------------------------------------------------------------
library(xaringanExtra)
xaringanExtra::use_panelset()

# hook for setting output number of lines --------------------------------------
hook_output <- knitr::knit_hooks$get("output")
knitr::knit_hooks$set(output = function(x, options) {
  lines <- options$output.lines
  if (is.null(lines)) {
    return(hook_output(x, options)) # pass to default hook
  }
  x <- unlist(strsplit(x, "\n"))
  more <- "..."
  if (length(lines) == 1) { # first n lines
    if (length(x) > lines) {
      # truncate the output, but add ....
      x <- c(head(x, lines), more)
    }
  } else {
    x <- c(more, x[lines], more)
  }
  # paste these lines together
  x <- paste(c(x, ""), collapse = "\n")
  hook_output(x, options)
})


# Referencing ------------------------------------------------------------------
library(RefManageR)
BibOptions(check.entries = FALSE,
           bib.style = "authoryear",
           cite.style = "authoryear",
           style = "markdown",
           hyperlink = TRUE,
           dashed = FALSE,
           longnamesfirst = FALSE,
           max.names = 2)
myBib <- ReadBib("../bibliography.bib", check = FALSE)
```

layout: true
  
<div class="my-footer">
<span>
<a href="https://forwards.github.io/" target="_blank">ðŸ”— Link to slides</a>
</span>
</div> 


---

class: middle

# Overview

---

## Welcome!

.pull-left[

Emma Rand

-  Senior lecturer (Prof) University of York, UK in the Department of Biology 

-  [Forwards](https://forwards.github.io/) Teaching Team Lead

]
.pull-right[
```{r echo=FALSE, out.width="300px"}

knitr::include_graphics("../images/emma-rand.png")
```


]


---

## Summary

This workshop explains what a package is and why you might want to write one. 

-  where packages come from
-  where they live on your computer
-  package states
-  package components


???

This workshop explains what a package is and why you might want to write one. It covers where packages come from, where they live on your computer and the different states a package can be in. We will explore the key components of a package using an example and outline the Forwards approach to package development process.

---

## Lesson plan

-  0 - 10: Introduction  
    -  Prerequisites  
    -  Learning Objectives  
-  10 - 25: Section 1: Live code-along-coding  
-  25 - 30: Additional exercises based on Section 1  
-  30 - 45: Section 2: Live code-along-coding  
-  45 - 50: Additional exercises based on Section 2  
-  50 - 55: Wrap-up, where next, additional exercises  

<!-- Edit appropriately -->

???

Add speaker notes

---

## Module Prerequisites

Before starting this module you should:

-  [install R and RStudio](../prerequisite-guides/install-r-rstudio.md)

-  have some experience of coding in R and it will help to have previously installed and loaded packages



???

Add speaker notes

---

## Learning Objectives

At the end of this module the successful learner will be able to:

- explain the rationale for writing packages

- find and explore their own package library/libraries

- describe the different states a package can be in

- describe the key components of a package

- outline the development of a package using devtools


???

Add speaker notes

---

class: middle

# Why write a package?


---

## Script or Package

.pull-left[
.hand[.blue[Script]]

-  one-of data analysis
-  
]

.pull-right[
.hand[.blue[Package]]
-  defines reusable components
-  
]


???

Add speaker notes

---

## Why resuable components

-  You want to **test** it

-  You want to **generalise** it

-  You want to **document** it

-  You want to **share** it


???

These aspects allow you to work reproducibly, collaborate with others and disseminate your work more easily.

This helps you gain recognition and create impact from your work.

---

## The bad news

.... it may be frustrating


```{r, echo=FALSE}
knitr::include_graphics("../../pics/allie_brosh_argh.png")
```

.footnote[
COPYRIGHT: Allie Brosh  http://hyperboleandahalf.blogspot.com/2010/09/four-levels-of-social-entrapment.html
]


???

Add speaker notes

---

## The good news!

.... frustration is normal and temporary.


```{r, echo=FALSE}
knitr::include_graphics("../../pics/allie_brosh_happy.png")
```

.footnote[
COPYRIGHT: Allie Brosh  http://hyperboleandahalf.blogspot.com/2010/06/this-is-why-ill-never-be-adult.html
]


???

Add speaker notes
---

class: middle

# Summary

---

## Summary

<!-- summarise module -->


???

Add speaker notes

---

class: middle

# Where next?

---

## Where next?

<!-- which module in the curriculum could follow -->
<!-- list some follow-up resources -->

???

Add speaker notes


---

class: middle

# Approach


---

## Approach



---

Slides made with:  **`knitr`** `r Cite(myBib, c("knitr1", "knitr2", "knitr3"))`,**`R Markdown`** `r Cite(myBib, c("markdown1", "markdown2"))`, **`xaringan`** `r Cite(myBib, "xaringan")`, **`xaringanthemer`** `r Cite(myBib, "xaringanthemer")`, **`xaringanExtra`** `r Cite(myBib, "xaringanExtra")`, **`countdown`** `r Cite(myBib, "countdown")`. 

Referencing with **`RefManageR`** `r Cite(myBib, "McLean-2017")`.

Designed by: [Mine Ã‡etinkaya-Rundel](https://twitter.com/minebocek) and [Emma Rand](https://twitter.com/er13_r)

---
## References

.small[
```{r refs1, echo=FALSE, results="asis"}
PrintBibliography(myBib, start = 1, end = 5)
```
]

---

## References

.small[
```{r refs2, echo=FALSE, results="asis"}
PrintBibliography(myBib, start = 6, end = 10)
```
]

---
## References

.small[
```{r refs3, echo=FALSE, results="asis"}
PrintBibliography(myBib, start = 11)
```
]

---
## License

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Package Development Module: fill in the module name</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Forwards</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.




